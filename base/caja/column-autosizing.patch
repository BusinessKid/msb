From b13b94a76b79dd2ce90998971defaf326f5c15ea Mon Sep 17 00:00:00 2001
From: monsta <monsta@inbox.ru>
Date: Mon, 28 Aug 2017 14:15:46 +0300
Subject: [PATCH 1/2] Revert "Adds columns autosizing"

This reverts commit 2a424fca8bd928223e92570fa692266c471a52b3.
---
 src/file-manager/fm-list-view.c | 2 --
 1 file changed, 2 deletions(-)

diff --git a/src/file-manager/fm-list-view.c b/src/file-manager/fm-list-view.c
index 155b3b20..4a2a82fd 100644
--- a/src/file-manager/fm-list-view.c
+++ b/src/file-manager/fm-list-view.c
@@ -1766,7 +1766,6 @@ create_and_set_up_tree_view (FMListView *view)
             gtk_tree_view_column_set_sort_column_id (view->details->file_name_column, column_num);
             gtk_tree_view_column_set_title (view->details->file_name_column, _("Name"));
             gtk_tree_view_column_set_resizable (view->details->file_name_column, TRUE);
-            gtk_tree_view_column_set_sizing(view->details->file_name_column, GTK_TREE_VIEW_COLUMN_AUTOSIZE);
 
             gtk_tree_view_column_pack_start (view->details->file_name_column, cell, FALSE);
             gtk_tree_view_column_set_attributes (view->details->file_name_column,
@@ -1806,7 +1805,6 @@ create_and_set_up_tree_view (FMListView *view)
                                  column);
 
             gtk_tree_view_column_set_resizable (column, TRUE);
-            gtk_tree_view_column_set_sizing(column, GTK_TREE_VIEW_COLUMN_AUTOSIZE);
         }
         g_free (name);
         g_free (label);

From 1b6b16df34de6114e2cdd62b66d0c6e75c42a3e1 Mon Sep 17 00:00:00 2001
From: monsta <monsta@inbox.ru>
Date: Mon, 28 Aug 2017 14:17:18 +0300
Subject: [PATCH 2/2] list view: fix large icon margins on zooming out

ported from:
https://git.gnome.org/browse/nautilus/commit/?id=4f17fb7db7b8736ebb4fe82ddb1c279777847730
https://git.gnome.org/browse/nautilus/commit/?id=41de4e52b43c8ed5c9118860dac7caa303ebbc5b
---
 src/file-manager/fm-list-view.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/src/file-manager/fm-list-view.c b/src/file-manager/fm-list-view.c
index 4a2a82fd..85f6bad8 100644
--- a/src/file-manager/fm-list-view.c
+++ b/src/file-manager/fm-list-view.c
@@ -2777,6 +2777,9 @@ fm_list_view_set_zoom_level (FMListView *view,
     gtk_cell_renderer_set_fixed_size (GTK_CELL_RENDERER (view->details->pixbuf_cell),
                                       -1, icon_size);
 
+    /* FIXME: https://bugzilla.gnome.org/show_bug.cgi?id=641518 */
+    gtk_tree_view_columns_autosize (view->details->tree_view);
+
     fm_directory_view_update_menus (FM_DIRECTORY_VIEW (view));
 
     gtk_tree_model_foreach (GTK_TREE_MODEL (view->details->model), list_view_changed_foreach, NULL);
